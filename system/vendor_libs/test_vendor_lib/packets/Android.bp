// packet library for libbt-rootcanal
// ========================================================
cc_library_static {
    name: "libbt-rootcanal-packets",
    defaults: [
        "libchrome_support_defaults",
        "clang_file_coverage",
    ],
    host_supported: true,
    proprietary: true,
    srcs: [
        "iterator.cc",
        "counted_builder.cc",
        "packet_view.cc",
        "raw_builder.cc",
        "view.cc",
    ],
    cflags: [
        "-fvisibility=hidden",
    ],
    local_include_dirs: [
        ".",
    ],
    export_include_dirs: ["."],
    include_dirs: [
        "packages/modules/Bluetooth/system/vendor_libs/test_vendor_lib/include",
        "packages/modules/Bluetooth/system/vendor_libs/test_vendor_lib/",
        "packages/modules/Bluetooth/system/",
        "packages/modules/Bluetooth/system/gd",
    ],
    shared_libs: [
        "libbase",
        "liblog",
    ],
}

// Unit tests for the host
// ========================================================
cc_test_host {
    name: "rootcanal-packets_test_host",
    defaults: [
        "libchrome_support_defaults",
        "clang_file_coverage",
        "clang_coverage_bin",
    ],
    srcs: [
        "test/packet_builder_test.cc",
        "test/packet_view_test.cc",
        ":BluetoothHciClassSources",
    ],
    header_libs: [
        "libbluetooth_headers",
    ],
    local_include_dirs: [
        ".",
    ],
    include_dirs: [
        "packages/modules/Bluetooth/system",
        "packages/modules/Bluetooth/system/gd",
        "packages/modules/Bluetooth/system/hci/include",
        "packages/modules/Bluetooth/system/vendor_libs/test_vendor_lib",
        "packages/modules/Bluetooth/system/vendor_libs/test_vendor_lib/include",
    ],
    shared_libs: [
        "liblog",
    ],
    static_libs: [
        "libbt-rootcanal-types",
        "libbt-rootcanal-packets",
    ],
}
